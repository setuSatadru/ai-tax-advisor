# AI Tax Advisor - Deployment Guide

## üí∞ Cost Analysis

### **Potential Charges:**
- **Google Gemini API**: The only service that may incur charges
  - **Free tier**: 15 requests/minute, 1,500 requests/day
  - **Paid tier**: $0.075 per 1K input tokens, $0.30 per 1K output tokens
  - App configured for free tier limits (15 req/min, 900 req/hour)

### **Free Components:**
- All Python dependencies (open source)
- FastAPI framework
- No database (uses in-memory storage)
- No external storage services

## üöÄ Deployment Options (FREE)

### 1. Render (Recommended)
**Free Tier:** 512MB RAM, 0.1 CPU, 750 hours/month

```bash
# Steps:
1. Fork/clone repository to GitHub
2. Connect GitHub to Render
3. Create new Web Service
4. Set environment variables in dashboard
5. Deploy automatically
```

**Environment Variables to Set:**
- `GEMINI_API_KEY` - Your Google AI Studio API key
- `SECRET_KEY` - Auto-generated by Render

### 2. Railway
**Free Tier:** $5 monthly credit, 512MB RAM, 1 vCPU

```bash
# Steps:
1. Install Railway CLI: npm install -g @railway/cli
2. railway login
3. railway init
4. railway up
5. Set environment variables in dashboard
```

### 3. Fly.io
**Free Tier:** 3 shared VMs, 256MB RAM each

```bash
# Steps:
1. Install flyctl: https://fly.io/docs/hands-on/install-flyctl/
2. fly auth signup
3. fly launch
4. fly secrets set GEMINI_API_KEY=your_key_here
5. fly deploy
```

### 4. Google Cloud Run
**Free Tier:** 2M requests/month, 400K GB-seconds/month

```bash
# Steps:
1. Enable Cloud Run API
2. gcloud run deploy --source .
3. Set environment variables
4. Configure authentication
```

## üîß Pre-Deployment Setup

### 1. Get Gemini API Key
1. Visit [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Sign in with Google account
3. Create new API key
4. Copy the key for deployment

### 2. Prepare Repository
```bash
# Clone and prepare
git clone <your-repo>
cd ai-tax-advisor

# Test locally
pip install -r requirements.txt
python main.py
```

## üìã Step-by-Step: Render Deployment

### 1. GitHub Setup
```bash
# Push to GitHub
git add .
git commit -m "Prepare for deployment"
git push origin main
```

### 2. Render Dashboard
1. Go to [render.com](https://render.com)
2. Sign up/login with GitHub
3. Click "New +" ‚Üí "Web Service"
4. Connect your repository
5. Configure:
   - **Name**: ai-tax-advisor
   - **Runtime**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `uvicorn main:app --host 0.0.0.0 --port $PORT`

### 3. Environment Variables
Set in Render dashboard:
```
GEMINI_API_KEY = your_gemini_api_key_here
GEMINI_MODEL = gemini-2.0-flash-exp
GEMINI_MAX_TOKENS = 8192
GEMINI_TEMPERATURE = 0.7
GEMINI_REQUESTS_PER_MINUTE = 15
GEMINI_REQUESTS_PER_HOUR = 900
DEBUG = false
```

### 4. Deploy
- Click "Create Web Service"
- Wait for deployment (5-10 minutes)
- Access via provided URL

## üîç Monitoring Costs

### Gemini API Usage
- Monitor in [Google AI Studio](https://makersuite.google.com/app/apikey)
- Track requests in application logs
- Set up alerts for usage limits

### Free Tier Limits
- **Render**: 750 hours/month (31 days √ó 24 hours = 744 hours)
- **Railway**: $5 credit/month
- **Fly.io**: Always-free VMs with auto-sleep
- **Google Cloud**: 2M requests/month

## üö® Cost Optimization Tips

### 1. Stay Within Free Limits
```python
# Current settings (in config/settings.py)
GEMINI_REQUESTS_PER_MINUTE = 15    # Free tier limit
GEMINI_REQUESTS_PER_HOUR = 900     # Conservative daily limit
```

### 2. Implement Caching
```python
# Add to services/gemini_service.py
response_cache = {}  # Simple in-memory cache
```

### 3. Monitor Usage
```python
# Check logs for API usage
tail -f logs/ai_demo.log
```

## üîß Troubleshooting

### Common Issues
1. **API Key Not Set**: Check environment variables
2. **Rate Limit Exceeded**: Reduce request frequency
3. **Memory Issues**: Use smaller models or optimize code
4. **Build Failures**: Check requirements.txt versions

### Debug Commands
```bash
# Check service status
curl https://your-app.render.com/health

# Test AI connection
curl -X POST https://your-app.render.com/api/ai/test-connection
```

## üìä Expected Costs

### Completely Free Scenario
- Use Render/Railway/Fly.io free tier
- Stay within Gemini free tier (15 req/min)
- **Total cost**: $0/month

### Light Usage Scenario
- Exceed Gemini free tier slightly
- **Estimated cost**: $1-5/month

### Production Scenario
- Paid hosting + higher API usage
- **Estimated cost**: $20-50/month

## üéØ Recommended Approach

1. **Start Free**: Deploy on Render with free Gemini tier
2. **Monitor Usage**: Track API calls and costs
3. **Scale Gradually**: Upgrade only when needed
4. **Optimize**: Implement caching and rate limiting

Your application is designed to run completely free with minimal usage! 